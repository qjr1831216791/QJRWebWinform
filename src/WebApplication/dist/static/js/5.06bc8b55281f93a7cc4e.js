webpackJsonp([5],{sXvV:function(e,n){},wqTG:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={name:"Home",components:{ConfigurationSync:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"FTYw"))},TestPage:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"xgjG"))},CRMEntityMetadata:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"4RPX"))},WeatherForecast:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"7I85"))},SelfIntroduction:function(){return t.e(8).then(t.bind(null,"7bCS"))}},data:function(){return{rootPath:"/qjrweb",isCollapse:!1,componentsMapPath:{ConfigurationSync:"ConfigurationSync/main",TestPage:"Test/TestPage",CRMEntityMetadata:"CRMEntityMetadata/main",WeatherForecast:"WeatherForecast/main"},defaultPage:"WeatherForecast",componentMap:{},functionGroup:[{name:"天气与日期",index:"0",icon:"el-icon-date",items:[{name:"天气预报",index:"0-1",componentName:"WeatherForecast"}]},{name:"测试",index:"1",icon:"el-icon-monitor",items:[{name:"系统功能测试",index:"1-1",componentName:"TestPage"}]},{name:"CRM",index:"2",icon:"el-icon-setting",items:[{name:"CRM系统功能配置迁移",index:"2-1",componentName:"ConfigurationSync"},{name:"CRM实体元数据查询",index:"2-2",componentName:"CRMEntityMetadata"}]}],showSelf:!0,showMain:!1,environments:[],selectEnvironment:""}},created:function(){this.componentMapInit()},mounted:function(){var e=this;setTimeout(function(){e.GetCRMEnvironments()},300)},computed:{currentComponent:function(){this.$options.components;var e=new RegExp(this.rootPath+"/(.*)"),n=this.$route.path.match(e);if(n){var t=n[1];return this.componentMap[t]||this.componentMap[this.componentsMapPath[this.defaultPage]]}return this.componentMap[this.componentsMapPath[this.defaultPage]]},asideWide:function(){return{maxWidth:"240px",width:this.isCollapse?"auto":"240px"}}},methods:{navigateTo:function(e){var n=this.rootPath+"/"+this.componentsMapPath[e.componentName];this.$router.push({path:n},function(){})},GetCRMEnvironments:function(){var e=this,n=this;this.jshelper.ApiGet("Default/GetCRMEnvironments").then(function(t){t&&t.isSuccess&&(e.$set(n,"environments",t.data),null!=t.data&&t.data.length>0&&(e.$set(e,"selectEnvironment",t.data[0].value),e.environmentSelectChange(e.selectEnvironment))),e.$set(e,"showMain",!0),setTimeout(function(){e.$set(e,"showSelf",!1)},3e3)}).catch(function(n){e.jshelper.openAlertDialog(e,n.message,"获取CRM环境列表")}).finally(function(){e.jshelper.closeLoading()})},environmentSelectChange:function(e){var n="当前CRM环境为："+e;console.log(n),this.showMessage(n,"success"),this.$globalVar||(this.$globalVar={}),this.$globalVar.selectEnv=e,this.$refs.mainComponent&&this.$refs.mainComponent.$emit("environment-change",e)},showMessage:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$message({message:e,dangerouslyUseHTMLString:t,type:n})},componentMapInit:function(){var e={};for(var n in this.componentsMapPath){e[this.componentsMapPath[n]]=this.$options.components[n]}this.$set(this,"componentMap",e)}}},a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"fullscreen-div"},[t("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[t("SelfIntroduction",{directives:[{name:"show",rawName:"v-show",value:e.showSelf,expression:"showSelf"}],attrs:{title:"七之小站"}})],1),e._v(" "),e.showMain?t("el-container",[t("el-aside",{style:[e.asideWide]},[t("div",{staticClass:"logo-box",on:{click:function(n){e.isCollapse=!e.isCollapse}}},[e._v("My Web")]),e._v(" "),t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#dbebf1","text-color":"#606266","unique-opened":!1,collapse:e.isCollapse,"collapse-transition":!1,"default-active":"0-1"}},[t("el-select",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"el-select-custom",attrs:{filterable:"",size:"mini",placeholder:"请选择CRM环境"},on:{change:e.environmentSelectChange},model:{value:e.selectEnvironment,callback:function(n){e.selectEnvironment=n},expression:"selectEnvironment"}},e._l(e.environments,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),e._l(e.functionGroup,function(n){return t("el-submenu",{key:n.index,attrs:{index:n.index,title:n.name}},[t("template",{slot:"title"},[t("i",{class:n.icon}),e._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.name))])]),e._v(" "),e._l(n.items,function(n){return t("el-menu-item",{key:n.index,attrs:{index:n.index,title:n.name},on:{click:function(t){return e.navigateTo(n)}}},[e._v("\n                        "+e._s(n.name)+"\n                    ")])})],2)})],2)],1),e._v(" "),t("el-main",[t("div",{staticClass:"main-content scrollable-area"},[t(e.currentComponent,{ref:"mainComponent",tag:"div"})],1)])],1):e._e()],1)},staticRenderFns:[]};var i=t("VU/8")(o,a,!1,function(e){t("sXvV")},"data-v-150a6ebd",null);n.default=i.exports}});
//# sourceMappingURL=5.06bc8b55281f93a7cc4e.js.map